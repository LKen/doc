Outline

[TOC]

## 百度地图坐标标定功能

### 初步方案

- 实现canvas显示图片 ok

- 实现透明化   ok

- 实现移动，旋转，缩放 ok

- 实现绘制点坐标 ok

  > 点击屏幕获取点坐标，添加到数组，调用绘制，更新视图

- 转换成实际屏幕坐标 ok

- 转换成百度坐标 ok 

- 转换成wgs坐标 ok

## 电子围栏下发 

### 需求 

- 可控制显示 checkbox
- 多电子围栏并发显示
- 可操作
  - 可添加
  - 右键删除
- 选中状态处理
  - 视野中心移动
  - 量高 （或者textMarker）

### 需求详细分析

- 多机器人显示

> 1. 在无机器人的时候，默认地图还是会打开，自动定位到 高新兴
> 2. 判断离线，有则 3， 无则return
> 3. longtitude=0,latitude=0的情况下，不显示，等到点击再作提示
> 4. 做icon标注、文字标注、以及polyline标注

- 可控制显示 checkbox

> 在屏幕上方显示出来，可点击，默认选中状态
>
> 选中： 方法1
>
> 不选中： 方法2
>
> p.s : 只是显示与隐藏，不带清除，页面重新打开时，所有路线清空

- 多电子围栏并发显示

> 前置：可控制显示 **选中：方法1** 
>
> 参数输入： 获取数据源（ajax）
>
> 触发渲染方法： 方法3

- 侧拉栏选中状态处理

> 前置：**选中：方法1** && 获取数据源（ajax） 
>
> 参数输入：机器人id
>
> 视野中心移动： 方法4
>
> 亮高元素： 方法5

- 多路径显现

> 1. 记录点（收集）
> 2. 不断的绘制 -- 在获取点之后不断的绘制出来
> 3. 重复的点不再添加

- 电子围栏点击事件

> 1. 移动到事件源
> 2. 高亮处理，同时清除 otherelse 
> 3. 处理侧拉栏avtive-list状态

- 电子围栏超出警告

> 1. 显示警告窗口（table）
> 2. 每次获取机器人位置时候，检测，to 2
> 3. 若是多电子围栏，只要处在其中一个就可以了
> 4. 若是没有电子围栏不存在超出的警告
> 5. 显示窗口，（已显示、未显示），本来已经存在内容（隐藏）
> 6. 显示警告的机器人
> 7. 将警告的机器人列表出来【id，事件，icon】
>
>


### 2018.1.11    8:51
- - 刷新侧拉栏状态： 10秒  ok
  - 利用请求返回的数据修改对应的侧拉栏 以及 缓存的列表数据
- 机器人不区分在线离线 均显示出来，用图标区分  ok
- 机器人点集合优化（最近一个点与上一次点对比，相同则不添加）ok
- 在异步请求的时候，切换标定 会出现 icon残留 ok
- 切换校准坐标时，label不显示的问题 ok
- 机器人显示图标的重用 ok
- 优化UI按钮  ok
- 在IE下 地图设置中心问题 导致图标不正常，一直置顶
  - 缩放等级 ok 
  - 数据加载问题 error





